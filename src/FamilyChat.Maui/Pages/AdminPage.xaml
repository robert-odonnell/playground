<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:admin="clr-namespace:FamilyChat.Contracts.Admin;assembly=FamilyChat.Contracts"
             x:Class="FamilyChat.Maui.Pages.AdminPage"
             Title="Admin">
    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="16">
            <Label Text="Users" FontSize="20" FontAttributes="Bold" />
            <Entry Placeholder="Email" Text="{Binding NewUserEmail}" />
            <Entry Placeholder="Display name" Text="{Binding NewUserDisplayName}" />
            <Button Text="Add User" Command="{Binding AddUserCommand}" />

            <CollectionView ItemsSource="{Binding Users}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="admin:AdminUserDto">
                        <HorizontalStackLayout Padding="8" Spacing="8">
                            <Label Text="{Binding DisplayName}" WidthRequest="160" />
                            <Button Text="Toggle Disabled" Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.ToggleUserDisabledCommand}" CommandParameter="{Binding .}" />
                            <Button Text="Toggle Admin" Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.ToggleUserAdminCommand}" CommandParameter="{Binding .}" />
                        </HorizontalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <Label Text="Channels" FontSize="20" FontAttributes="Bold" />
            <Entry Placeholder="Channel name" Text="{Binding NewChannelName}" />
            <HorizontalStackLayout>
                <Label Text="Private" VerticalOptions="Center" />
                <Switch IsToggled="{Binding NewChannelPrivate}" />
            </HorizontalStackLayout>
            <Button Text="Create Channel" Command="{Binding AddChannelCommand}" />

            <CollectionView ItemsSource="{Binding Channels}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="admin:AdminChannelDto">
                        <VerticalStackLayout Padding="8">
                            <Label Text="{Binding Name}" FontAttributes="Bold" />
                            <Label Text="{Binding Topic}" FontSize="12" />
                        </VerticalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
